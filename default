server {
	listen 80 default_server;
	listen [::]:80 default_server;
	
	server_name ${SERVER_IP};
	return 302 https://$server_name$request_uri;	
}


server {

	
	listen 443 ssl default_server;
	listen [::]:443 ssl default_server;
	include snippets/self-signed.conf;
	include snippets/ssl-params.conf;

	location / {
		proxy_pass http://localhost:${APP_PORT};
		proxy_http_version 1.1;
		proxy_set_header Upgrade $http_upgrade;
		proxy_set_header Connection 'upgrade';
		proxy_set_header Host $host;
		proxy_cache_bypass $http_upgrade;
	}
}